
# =================================================
- workflow: start party

- action: Alice

- page:
    - name: PartyApp 13:55
    - label: Welcome Alice
    - label: In which region is your party
    - input: region
      fill: Kassel
    - button: ok
      command: get region 13:56

- policy: PartyApp
  trigger: 13:56

- data: 13:56:02
  region: Kassel

- page:
    - name: PartyApp 14:00
    - label: Welcome Alice
    - label: Choose a party
    - input: party
      fill: SE BBQ
    - input: date
      fill: after work
    - input: location
      fill: Uni
    - button: ok
      command: get party 14:01

- data: Party
  name: SE BBQ
  date: after work
  location: Uni
  @migratedTo: Party2

- data: Party2
  name: SE BBQ
  region: Kassel
  region.back: [parties]
  date: after work
  address: Uni


- page:
    - name: PartyApp welcome
    - label: Welcome Alice
    - label: Let's do the SE BBQ
    - label: no items yet
    - button: add
      command: add item

- page:
    - name: PartyApp item
    - label: Welcome Alice
    - label: Let's do the SE BBQ
    - input: item
      fill: beer
    - input: price
      fill: 12.00
    - input: buyer
      fill: Bob
    - button: ok
      command: build item

- data: Item
  name: beer
  price: 12.00
  buyer: sE_BBQ_Bob
  buyer.back: [items]
  party: SE BBQ
  party.back: [items]

- data: Guest sE_BBQ_Bob
  name: Bob
  party: SE BBQ
  party.back: [guests]

- page:
    - name: PartyApp welcome
    - label: Welcome Alice
    - label: Let's do the SE BBQ
    - label: beer 12.00 Bob
    - button: add
      command: add item 14:07
    - label: Total 12.00
    - label: Share 12.00
    - label: Bob 0.00

- page:
    - name: PartyApp doit
    - label: Welcome Alice
    - label: Let's do the SE BBQ
    - input: item
      fill: meat
    - input: price
      fill: 21.00
    - input: buyer
      fill: Alice
    - button: ok
      command: build item

- data: Item
  name: meat
  price: 21.00
  buyer: sE_BBQ_Alice
  party: SE BBQ

- event: item booked
  name: meat
  price: 21.00
  buyer: Alice
  party: SE BBQ

- data: Guest sE_BBQ_Alice
  name: Alice
  expenses: 0.00
  party: SE BBQ

- page:
    - name: PartyApp overview
    - label: Welcome Alice
    - label: Let's do the SE BBQ
    - label: beer 12.00 Bob
    - label: meat 21.00 Alice
    - button: add
    - label: Total 33.00
    - label: Share 16.50
    - label: Bob -4.50
    - label: Alice +4.50
