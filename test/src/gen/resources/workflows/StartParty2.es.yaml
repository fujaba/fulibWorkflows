
# =================================================
- workflow: start party

- action: Alice

- page:
    - name: PartyApp 13:55
    - label: Welcome Alice
    - label: In which region is your party
    - input: region
      fill: Kassel
    - button: ok
      command: get region 13:56

- policy: PartyApp
  trigger: 13:56

- data: 13:56:02
  region: Kassel

- page:
    - name: PartyApp 14:00
    - label: Welcome Alice
    - label: Choose a party
    - input: party
      fill: SE BBQ
    - input: date
      fill: after work
    - input: location
      fill: Uni
    - button: ok
      command: get party 14:01

- query: sE_BBQ 14:01:01
  result: []

- data: 14:01:02
  Party: sE_BBQ
  name: SE BBQ
  date: after work
  location: Uni
  @migratedTo: Party2

- data: 14:01:03
  Party2: sE_BBQ
  name: SE BBQ
  region: Kassel
  region.back: [parties]
  date: after work
  address: Uni


- page:
    - name: PartyApp 14:02
    - label: Welcome Alice
    - label: Let's do the SE BBQ
    - label: no items yet
    - button: add
      command: add item 14:03

- page:
    - name: PartyApp 14:04
    - label: Welcome Alice
    - label: Let's do the SE BBQ
    - input: item
      fill: beer
    - input: price
      fill: 12.00
    - input: buyer
      fill: Bob
    - button: ok
      command: build item 14:05

- data: 14:05:01
  Item: beer
  name: beer
  price: 12.00
  buyer: sE_BBQ_Bob
  buyer.back: [items]
  party: sE_BBQ
  party.back: [items]

- data: 14:05:02
  guest: sE_BBQ_Bob
  name: Bob
  party: sE_BBQ
  party.back: [guests]

- page:
    - name: PartyApp 14:06
    - label: Welcome Alice
    - label: Let's do the SE BBQ
    - label: beer 12.00 Bob
    - button: add
      command: add item 14:07
    - label: Total 12.00
    - label: Share 12.00
    - label: Bob 0.00

- page:
    - name: PartyApp 14:08
    - label: Welcome Alice
    - label: Let's do the SE BBQ
    - input: item
      fill: meat
    - input: price
      fill: 21.00
    - input: buyer
      fill: Alice
    - button: ok
      command: build item 14:09

- data: 14:09:01
  Item: meat
  name: meat
  price: 21.00
  buyer: sE_BBQ_Alice
  party: sE_BBQ

- event: item booked 14:09:03
  name: meat
  price: 21.00
  buyer: Alice
  party: sE_BBQ

- data: 14:09:02
  guest: sE_BBQ_Alice
  name: Alice
  expenses: 0.00
  party: sE_BBQ

- page:
    - name: PartyApp 14:10
    - label: Welcome Alice
    - label: Let's do the SE BBQ
    - label: beer 12.00 Bob
    - label: meat 21.00 Alice
    - button: add
    - label: Total 33.00
    - label: Share 16.50
    - label: Bob -4.50
    - label: Alice +4.50
